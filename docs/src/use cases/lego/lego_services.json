{
  "lego-s2-mosaic": {
    "user_id": "12d6b89f-0f26-4fe7-a461-67418919b794",
    "service": {
      "id": "d55ae9e5-83d7-41c2-ae56-e6c72d3b7da5",
      "type": "XYZ",
      "configuration": {
        "tile_size": 256,
        "minzoom": 7,
        "maxzoom": 7
      },
      "title": "Lego Brick Sentinel-2 Global Mosaic",
      "enabled": true,
      "process": {
        "parameters": [],
        "process_graph": {
          "1": {
            "process_id": "load_collection_and_reduce",
            "result": false,
            "arguments": {
              "bands": ["B04", "B03", "B02"],
              "id": "sentinel-2-global-mosaics",
              "spatial_extent": {
                "east": {
                  "from_parameter": "spatial_extent_east"
                },
                "north": {
                  "from_parameter": "spatial_extent_north"
                },
                "south": {
                  "from_parameter": "spatial_extent_south"
                },
                "west": {
                  "from_parameter": "spatial_extent_west"
                },
                "crs": {
                  "from_parameter": "spatial_extent_crs"
                }
              },
              "temporal_extent": [
                "2024-04-01T00:00:00Z",
                "2024-04-30T23:59:59Z"
              ]
            }
          },
          "2": {
            "process_id": "save_result",
            "result": true,
            "arguments": {
              "data": {
                "from_node": "lego"
              },
              "format": "PNG",
              "options": {
                "datatype": "byte"
              }
            }
          },
          "3": {
            "process_id": "apply",
            "result": false,
            "arguments": {
              "data": {
                "from_node": "1"
              },
              "process": {
                "process_graph": {
                  "1": {
                    "arguments": {
                      "inputMax": 10000,
                      "inputMin": 0,
                      "outputMax": 255,
                      "x": {
                        "from_parameter": "x"
                      }
                    },
                    "process_id": "linear_scale_range"
                  },
                  "2": {
                    "process_id": "trunc",
                    "arguments": {
                      "x": {
                        "from_node": "1"
                      }
                    },
                    "result": true
                  }
                }
              }
            }
          },
          "color": {
            "process_id": "color_formula",
            "result": false,
            "arguments": {
              "data": {
                "from_node": "3"
              },
              "formula": "Gamma R 2 Gamma G 2.32 Gamma B 2.2 Sigmoidal RGB 10 0.237 Saturation 1.15"
            }
          },
          "lego": {
            "process_id": "legofication",
            "result": false,
            "arguments": {
              "data": {
                "from_node": "color"
              },
              "nbbricks": 4,
              "bricksize": 64,
              "water_threshold": 0.1
            }
          }
        }
      }
    }
  },
  "lego-s2-tile-instructions": {
    "user_id": "12d6b89f-0f26-4fe7-a461-67418919b794",
    "service": {
      "id": "d55ae9e5-83d7-41c2-ae56-e6c72d3b7da5",
      "type": "XYZ",
      "configuration": {
        "tile_size": 256,
        "minzoom": 7,
        "maxzoom": 7
      },
      "title": "Lego Brick Sentinel-2 Global Mosaic Tile Instructions",
      "enabled": true,
      "process": {
        "parameters": [],
        "process_graph": {
          "1": {
            "process_id": "load_collection_and_reduce",
            "result": false,
            "arguments": {
              "bands": ["B04", "B03", "B02"],
              "id": "sentinel-2-global-mosaics",
              "spatial_extent": {
                "east": {
                  "from_parameter": "spatial_extent_east"
                },
                "north": {
                  "from_parameter": "spatial_extent_north"
                },
                "south": {
                  "from_parameter": "spatial_extent_south"
                },
                "west": {
                  "from_parameter": "spatial_extent_west"
                },
                "crs": {
                  "from_parameter": "spatial_extent_crs"
                }
              },
              "temporal_extent": [
                "2020-04-01T00:00:00Z",
                "2020-04-30T23:59:59Z"
              ]
            }
          },
          "2": {
            "process_id": "save_result",
            "result": true,
            "arguments": {
              "data": {
                "from_node": "instructions"
              },
              "format": "PNG",
              "options": {
                "datatype": "byte"
              }
            }
          },
          "3": {
            "process_id": "apply",
            "result": false,
            "arguments": {
              "data": {
                "from_node": "1"
              },
              "process": {
                "process_graph": {
                  "1": {
                    "arguments": {
                      "inputMax": 10000,
                      "inputMin": 0,
                      "outputMax": 255,
                      "x": {
                        "from_parameter": "x"
                      }
                    },
                    "process_id": "linear_scale_range"
                  },
                  "2": {
                    "process_id": "trunc",
                    "arguments": {
                      "x": {
                        "from_node": "1"
                      }
                    },
                    "result": true
                  }
                }
              }
            }
          },
          "color": {
            "process_id": "color_formula",
            "result": false,
            "arguments": {
              "data": {
                "from_node": "3"
              },
              "formula": "Gamma R 2 Gamma G 2.32 Gamma B 2.2 Sigmoidal RGB 10 0.237 Saturation 1.15"
            }
          },
          "lego": {
            "process_id": "legofication",
            "result": false,
            "arguments": {
              "data": {
                "from_node": "color"
              },
              "nbbricks": 4,
              "bricksize": 64,
              "water_threshold": 0.1
            }
          },
          "instructions": {
            "process_id": "generate_lego_instructions",
            "result": false,
            "arguments": {
              "data": {
                "from_node": "lego"
              }
            }
          }
        }
      }
    }
  },
  "lego-s2-brick-quantization": {
    "user_id": "12d6b89f-0f26-4fe7-a461-67418919b794",
    "service": {
      "id": "d55ae9e5-83d7-41c2-ae56-e6c72d3b7da5",
      "type": "XYZ",
      "configuration": {
        "tile_size": 256,
        "minzoom": 7,
        "maxzoom": 7
      },
      "title": "Lego Brick Sentinel-2 Global Mosaic Quantization",
      "enabled": true,
      "process": {
        "parameters": [],
        "process_graph": {
          "1": {
            "process_id": "load_collection_and_reduce",
            "result": false,
            "arguments": {
              "bands": ["B04", "B03", "B02"],
              "id": "sentinel-2-global-mosaics",
              "spatial_extent": {
                "east": {
                  "from_parameter": "spatial_extent_east"
                },
                "north": {
                  "from_parameter": "spatial_extent_north"
                },
                "south": {
                  "from_parameter": "spatial_extent_south"
                },
                "west": {
                  "from_parameter": "spatial_extent_west"
                },
                "crs": {
                  "from_parameter": "spatial_extent_crs"
                }
              },
              "temporal_extent": [
                "2020-04-01T00:00:00Z",
                "2020-04-30T23:59:59Z"
              ]
            }
          },
          "2": {
            "process_id": "save_result",
            "result": true,
            "arguments": {
              "data": {
                "from_node": "qty"
              },
              "format": "CSV",
              "options": {
                "datatype": "byte"
              }
            }
          },
          "3": {
            "process_id": "apply",
            "result": false,
            "arguments": {
              "data": {
                "from_node": "1"
              },
              "process": {
                "process_graph": {
                  "1": {
                    "arguments": {
                      "inputMax": 10000,
                      "inputMin": 0,
                      "outputMax": 255,
                      "x": {
                        "from_parameter": "x"
                      }
                    },
                    "process_id": "linear_scale_range"
                  },
                  "2": {
                    "process_id": "trunc",
                    "arguments": {
                      "x": {
                        "from_node": "1"
                      }
                    },
                    "result": true
                  }
                }
              }
            }
          },
          "color": {
            "process_id": "color_formula",
            "result": false,
            "arguments": {
              "data": {
                "from_node": "3"
              },
              "formula": "Gamma R 2 Gamma G 2.32 Gamma B 2.2 Sigmoidal RGB 10 0.237 Saturation 1.15"
            }
          },
          "lego": {
            "process_id": "legofication",
            "result": false,
            "arguments": {
              "data": {
                "from_node": "color"
              },
              "nbbricks": 4,
              "bricksize": 64,
              "water_threshold": 0.1
            }
          },
          "qty": {
            "process_id": "get_brick_quantities",
            "result": false,
            "arguments": {
              "data": {
                "from_node": "lego"
              }
            }
          }
        }
      }
    }
  }
}
