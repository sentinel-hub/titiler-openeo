{
    "id": "legofication",
    "summary": "Transform an image into a Lego mosaic image.",
    "description": "Return Image data with a Lego mosaic applied.",
    "categories": [
        "images",
        "color",
        "fun"
    ],
    "parameters": [
        {
            "name": "data",
            "description": "An image.",
            "schema": {
                "type": "object",
                "subtype": "imagedata"
            }
        },
        {
            "name": "nbbricks",
            "description": "The number of bricks to use on the shortest side of the image.",
            "schema":  {
                "type": "integer",
                "minimum": 1,
                "default": 16
            }
        },
        {
            "name": "bricksize",
            "description": "The size of the bricks in pixels.",
            "schema":  {
                "type": "integer",
                "minimum": 8,
                "default": 16
            }
        },
        {
            "name": "water_threshold",
            "description": "The water threshold percentage for the image.",
            "schema":  {
                "type": "number",
                "minimum": 0,
                "maximum": 1,
                "default": 0.2
            }
        },
        {
            "name": "colors_config",
            "description": "Path to a custom LEGO colors configuration file (JSON). If not provided, uses the default configuration.",
            "schema": {
                "type": "string",
                "optional": true
            }
        }
    ],
    "returns": {
        "description": "The image with the Lego mosaic applied.",
        "schema": {
            "type": "object",
            "subtype": "imagedata"
        }
    },
    "exceptions": {
        "IndexError": {
            "message": "The number of bricks is too high for the image size."
        }
    },
    "examples": [{
        "arguments": {
            "nbbricks": 32
        }
    }]
}
